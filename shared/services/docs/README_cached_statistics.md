# –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **CachedStatisticsService** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
2. **StatisticsScheduler** - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞
3. **Cache Service** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Redis –∫–µ—à–µ–º
4. **Admin Panel Integration** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–¥–º–∏–Ω—Å–∫–æ–π –ø–∞–Ω–µ–ª—å—é –±–æ—Ç–∞

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ Redis —Å TTL 30 –º–∏–Ω—É—Ç
2. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–µ—à –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
3. **Fallback**: –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–µ—à–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î
4. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–µ—à

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –±–æ—Ç–µ

```python
from shared.services.statistics_scheduler import start_statistics_scheduler

async def on_startup():
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Redis
    await init_redis()
    
    # –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    await start_statistics_scheduler(refresh_interval_minutes=30)
    
async def on_shutdown():
    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
    await stop_statistics_scheduler()
    await close_redis()
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```python
from shared.services.cached_statistics_service import CachedStatisticsService

# –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∏–∑ –∫–µ—à–∞ –∏–ª–∏ –ë–î)
overall_stats = await CachedStatisticsService.get_overall_statistics()

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
overall_stats = await CachedStatisticsService.get_overall_statistics(force_refresh=True)

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
distribution = await CachedStatisticsService.get_loyalty_level_distribution()

# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
top_users = await CachedStatisticsService.get_top_users_by_points(limit=10)

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ—à–µ–ª—å–∫–æ–≤
wallet_stats = await CachedStatisticsService.get_wallet_connection_stats()
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º

```python
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
results = await CachedStatisticsService.refresh_all_statistics()

# –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞
await CachedStatisticsService.invalidate_cache()  # –í–µ—Å—å –∫–µ—à
await CachedStatisticsService.invalidate_cache("overall")  # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø

# –°—Ç–∞—Ç—É—Å –∫–µ—à–∞
cache_status = await CachedStatisticsService.get_cache_status()
```

## –ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å

### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –∫–µ—à–∞
2. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ö–Ω–æ–ø–∫–∞ "‚ö° –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ" –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞
3. **–°—Ç–∞—Ç—É—Å –∫–µ—à–∞**: –†–∞–∑–¥–µ–ª "üíæ –°—Ç–∞—Ç—É—Å –∫–µ—à–∞" —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

```
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ üìà –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ üèÜ –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ üí≥ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—à–µ–ª—å–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ üîÑ –û–±–Ω–æ–≤–∏—Ç—å (–∏–∑ –∫–µ—à–∞)
‚îÇ   ‚îî‚îÄ‚îÄ ‚ö° –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ (–æ–±–Ω–æ–≤–∏—Ç—å –∫–µ—à)
‚îú‚îÄ‚îÄ üíæ –°—Ç–∞—Ç—É—Å –∫–µ—à–∞
‚îÇ   ‚îú‚îÄ‚îÄ üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
‚îÇ   ‚îî‚îÄ‚îÄ ‚ö° –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ üéØ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –í cache_service.py
STATISTICS_TTL = 30 * 60  # 30 –º–∏–Ω—É—Ç TTL –¥–ª—è –∫–µ—à–∞
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

```python
# –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –º–∏–Ω—É—Ç)
await start_statistics_scheduler(refresh_interval_minutes=30)
```

### –¢–∏–ø—ã –∫–µ—à–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- `overall` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `loyalty_distribution` - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- `top_users_10` - —Ç–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –±–∞–ª–ª–∞–º
- `wallet_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–µ—à–µ–º –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```
INFO: Overall statistics cached successfully
INFO: Statistics scheduler started with 30 minute interval
INFO: Statistics refresh completed: {'overall': True, 'loyalty_distribution': True, ...}
WARNING: Statistics refresh partially failed (3/4): {...}
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–µ—à–∞

–î–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω—Å–∫—É—é –ø–∞–Ω–µ–ª—å:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è –∫–µ—à–∞
- –û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ (TTL)

### –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

- –°—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã (–∑–∞–ø—É—â–µ–Ω/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ 30 –º–∏–Ω—É—Ç
2. **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫**: –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Redis –∑–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: Fallback –Ω–∞ –ë–î –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–µ—à–∞

### –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: ~5-10ms (–∏–∑ –∫–µ—à–∞) vs ~500-1000ms (–∏–∑ –ë–î)
- **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î**: –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 95% –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: ~1-5MB –≤ Redis –¥–ª—è –≤—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Redis —Å–µ—Ä–≤–µ—Ä
- Python –ø–∞–∫–µ—Ç—ã: `redis`, `pydantic`

### –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

```bash
# –ö–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
python scripts/init_statistics_scheduler.py

# –ò–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –±–æ—Ç–∞
```

### Docker Compose

```yaml
services:
  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
  
  bot:
    build: .
    depends_on:
      - redis
    environment:
      - REDIS_HOST=redis
      - REDIS_PORT=6379
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–µ—à–µ–º

1. **–ö–µ—à –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É Redis
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

2. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ**:
   - –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TTL –∫–µ—à–∞

3. **–û—à–∏–±–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–µ—à–∞
cache_status = await CachedStatisticsService.get_cache_status()

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
scheduler_status = get_scheduler_status()

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
results = await refresh_statistics_now()
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `StatisticsService`
2. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥ –≤ `CachedStatisticsService`
3. –û–±–Ω–æ–≤–∏—Ç—å `refresh_all_statistics()`
4. –î–æ–±–∞–≤–∏—Ç—å –≤ –∞–¥–º–∏–Ω—Å–∫—É—é –ø–∞–Ω–µ–ª—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:

```python
# –ë—ã—Å—Ç—Ä–æ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
await cache_statistics("realtime_stats", data, ttl=5*60)

# –ú–µ–¥–ª–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞)  
await cache_statistics("historical_stats", data, ttl=2*60*60)
```